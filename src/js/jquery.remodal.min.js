/*
 *  Remodal - v0.6.4
 *  Flat, responsive, lightweight, easy customizable modal window plugin with declarative state notation and hash tracking.
 *  http://vodkabears.github.io/remodal/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(a){return t(e,a)}):"object"==typeof exports?t(e,require("jquery")):t(e,e.jQuery||e.Zepto)}(this,function(e,t){"use strict";function a(e){var t,a,n,o,s=e.css("transition-duration")||e.css("-webkit-transition-duration")||e.css("-moz-transition-duration")||e.css("-o-transition-duration")||e.css("-ms-transition-duration")||"0s",i=e.css("transition-delay")||e.css("-webkit-transition-delay")||e.css("-moz-transition-delay")||e.css("-o-transition-delay")||e.css("-ms-transition-delay")||"0s";for(s=s.split(", "),i=i.split(", "),o=0,a=s.length,t=Number.NEGATIVE_INFINITY;a>o;o++)n=parseFloat(s[o])+parseFloat(i[o]),n>t&&(t=n);return 1e3*n}function n(){if(t(document.body).height()<=t(window).height())return 0;var e,a,n=document.createElement("div"),o=document.createElement("div");return n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n),e=n.offsetWidth,n.style.overflow="scroll",o.style.width="100%",n.appendChild(o),a=o.offsetWidth,n.parentNode.removeChild(n),e-a}function o(){var e,a,o=t("html"),s=u+"-is-locked";o.hasClass(s)||(a=t(document.body),e=parseInt(a.css("padding-right"),10)+n(),a.css("padding-right",e+"px"),o.addClass(s))}function s(){var e,a,o=t("html"),s=u+"-is-locked";o.hasClass(s)&&(a=t(document.body),e=parseInt(a.css("padding-right"),10)-n(),a.css("padding-right",e+"px"),o.removeClass(s))}function i(e){var t,a,n,o,s={};for(e=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),t=e.split(","),o=0,a=t.length;a>o;o++)t[o]=t[o].split(":"),n=t[o][1],("string"==typeof n||n instanceof String)&&(n="true"===n||("false"===n?!1:n)),("string"==typeof n||n instanceof String)&&(n=isNaN(n)?n:+n),s[t[o][0]]=n;return s}function r(e,n){var o,s,i,r=this;r.settings=t.extend({},h,n),r.$body=t(document.body),r.$overlay=t("."+u+"-overlay"),r.$overlay.length||(r.$overlay=t("<div>").addClass(u+"-overlay"),r.$body.append(r.$overlay)),r.$bg=t("."+u+"-bg"),r.$closeButton=t('<a href="#"></a>').addClass(u+"-close"),r.$wrapper=t("<div>").addClass(u+"-wrapper"),r.$modal=e,r.$modal.addClass(u),r.$modal.css("visibility","visible"),r.$modal.append(r.$closeButton),r.$wrapper.append(r.$modal),r.$body.append(r.$wrapper),r.$confirmButton=r.$modal.find("."+u+"-confirm"),r.$cancelButton=r.$modal.find("."+u+"-cancel"),o=a(r.$overlay),s=a(r.$modal),i=a(r.$bg),r.td=Math.max(o,s,i),r.$wrapper.on("click."+u,"."+u+"-close",function(e){e.preventDefault(),r.close()}),r.$wrapper.on("click."+u,"."+u+"-cancel",function(e){e.preventDefault(),r.$modal.trigger("cancel"),r.settings.closeOnCancel&&r.close("cancellation")}),r.$wrapper.on("click."+u,"."+u+"-confirm",function(e){e.preventDefault(),r.$modal.trigger("confirm"),r.settings.closeOnConfirm&&r.close("confirmation")}),t(document).on("keyup."+u,function(e){27===e.keyCode&&r.settings.closeOnEscape&&r.close()}),r.$wrapper.on("click."+u,function(e){var a=t(e.target);a.hasClass(u+"-wrapper")&&r.settings.closeOnAnyClick&&r.close()}),r.index=t[p].lookup.push(r)-1,r.busy=!1}function l(e,a){var n,o,s=location.hash.replace("#","");if("undefined"==typeof a&&(a=!0),s){try{o=t("[data-"+p+"-id="+s.replace(new RegExp("/","g"),"\\/")+"]")}catch(i){}o&&o.length&&(n=t[p].lookup[o.data(p)],n&&n.settings.hashTracking&&n.open())}else a&&d&&!d.busy&&d.settings.hashTracking&&d.close()}var d,c,p="remodal",u=e.remodalGlobals&&e.remodalGlobals.namespace||p,h=t.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnAnyClick:!0},e.remodalGlobals&&e.remodalGlobals.defaults);r.prototype.open=function(){if(!this.busy){var e,a=this;a.busy=!0,a.$modal.trigger("open"),e=a.$modal.attr("data-"+p+"-id"),e&&a.settings.hashTracking&&(c=t(window).scrollTop(),location.hash=e),d&&d!==a&&(d.$overlay.hide(),d.$wrapper.hide(),d.$body.removeClass(u+"-is-active")),d=a,o(),a.$overlay.show(),a.$wrapper.show(),setTimeout(function(){a.$body.addClass(u+"-is-active"),a.$wrapper.scrollTop(0),setTimeout(function(){a.busy=!1,a.$modal.trigger("opened")},a.td+50)},25)}},r.prototype.close=function(e){if(!this.busy){var a=this;a.busy=!0,a.$modal.trigger({type:"close",reason:e}),a.settings.hashTracking&&a.$modal.attr("data-"+p+"-id")===location.hash.substr(1)&&(location.hash="",t(window).scrollTop(c)),a.$body.removeClass(u+"-is-active"),setTimeout(function(){a.$overlay.hide(),a.$wrapper.hide(),s(),a.busy=!1,a.$modal.trigger({type:"closed",reason:e})},a.td+50)}},t[p]={lookup:[]},t.fn[p]=function(e){var a,n;return this.each(function(o,s){n=t(s),null==n.data(p)?(a=new r(n,e),n.data(p,a.index),a.settings.hashTracking&&n.attr("data-"+p+"-id")===location.hash.substr(1)&&a.open()):a=t[p].lookup[n.data(p)]}),a},t(document).ready(function(){t(document).on("click","[data-"+p+"-target]",function(e){e.preventDefault();var a=e.currentTarget,n=a.getAttribute("data-"+p+"-target"),o=t("[data-"+p+"-id="+n+"]");t[p].lookup[o.data(p)].open()}),t(document).find("."+u).each(function(e,a){var n=t(a),o=n.data(p+"-options");o?("string"==typeof o||o instanceof String)&&(o=i(o)):o={},n[p](o)})}),t(window).bind("hashchange."+u,l)});